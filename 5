userExist(email: any, password: any) {
  let allUsers = localStorage.getItem("allUsers");
  if (!allUsers) {
    console.log("No users found in localStorage.");
    return false;
  }
  
  allUsers = JSON.parse(allUsers);
  console.log("All users:", allUsers);

  let ind = allUsers.findIndex((ele: any) => {
    console.log(`Checking ${ele.email} against ${email}`);
    return ele.email.toLowerCase() === email.toLowerCase() && ele.password === password;
  });

  if (ind === -1) {
    console.log("User not found");
    return false;
  }

  console.log("User found:", allUsers[ind]);
  return allUsers[ind].id;
}
---

  } else {
    allUsers = JSON.parse(allUsers);
    allUsers = allUsers.map((user: any) => {
      if (!user.role) {
        user.role = 'read'; // Assign a default role if missing
      }
      return user;
    });
    localStorage.setItem("allUsers", JSON.stringify(allUsers));
----

<nav id="sidebarMenu" class="collapse d-lg-block sidebar collapse bg-white">
  <div class="position-sticky">
    <div class="list-group list-group-flush mx-3 mt-4">
      <p
        class="mb-2 list-group-item list-group-item-action py-2 ripple"
        (click)="homeNavigate()"
      >
        <mat-icon>home</mat-icon>
        <span class="d-none d-md-inline">Dashboard</span>
      </p>

      <!-- Show this item if userName is 'Admin User' or 'Write User' -->
      <p
        *ngIf="userName === 'Admin User' || userName === 'Write User'"
        class="mb-2 list-group-item list-group-item-action py-2 ripple"
        (click)="openCreate()"
      >
        <mat-icon>add</mat-icon>
        <span class="d-none d-md-inline">Create</span>
      </p>

      <!-- Show this item if userName is 'Admin User' -->
      <p
        *ngIf="userName === 'Admin User'"
        class="mb-2 list-group-item list-group-item-action py-2 ripple"
        (click)="userAccess()"
      >
        <mat-icon>people</mat-icon>
        <span class="d-none d-md-inline">User Access</span>
      </p>
    </div>
  </div>
</nav>

<router-outlet></router-outlet>
